<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
	xmlns:activiti="http://activiti.org/bpmn" targetNamespace="http://www.bpmnwithactiviti.org/multiinstance">

	<process id="decisionProcess" name="Decision making process">
		<startEvent id="theStart" activiti:formKey="decisionItem.form"/>
		<sequenceFlow sourceRef="theStart" targetRef="createAssigneeList"/>
		<serviceTask id="createAssigneeList" activiti:class="org.bpmnwithactiviti.chapter8.multiinstance.CreateAssigneeList"/>
		<sequenceFlow sourceRef="createAssigneeList" targetRef="decisionTask"/>
		<userTask id="decisionTask" name="Decision task" activiti:assignee="${assignee}">
		  <multiInstanceLoopCharacteristics isSequential="false" 
		     activiti:collection="assigneeList" activiti:elementVariable="assignee" >
		    <completionCondition>${nrOfCompletedInstances/nrOfInstances > 0.5 }</completionCondition>
		  </multiInstanceLoopCharacteristics>
		</userTask>
		<sequenceFlow sourceRef="decisionTask" targetRef="theEnd" />
		<endEvent id="theEnd" />
	</process>
</definitions>